
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Start ShadowSocks in One Minute Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="For the reason you know what, it is always difficult to access github or run some command to fetch remote resource from inside China network. One of the solution is to punch a hole in the Great Wall by setting up ShadowSocks proxy to route your traffic through secured tunnel. There are many great articles to introduce the theory of ShadowSocks and the installation of it, but there is none that automate the process of it. Here is a a automation shell script to help start ShadowSocks server and client in a minute, and it is tested on Ubuntu 16.04. Feel free to modify it according to your requirement.">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-intopic-toc/style.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-collapsible-chapters/collapsible-chapters.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-katex/katex.min.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="2017-09-14-Javascript-vs-Ruby-Inheritance/2017-09-14-Javascript-vs-Ruby-Inheritance.html" />
    
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../../">
            
                <a href="../../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    Blogs
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" >
            
                <span>
            
                    
                    2021
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1" data-path="../2021/2021-07-18-design-patterns.html">
            
                <a href="../2021/2021-07-18-design-patterns.html">
            
                    
                    Design Patterns
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2" data-path="../2021/2021-01-08-gcp-products/2021-01-08-gcp-products.html">
            
                <a href="../2021/2021-01-08-gcp-products/2021-01-08-gcp-products.html">
            
                    
                    GCP Products
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2" >
            
                <span>
            
                    
                    2020
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.1" data-path="../2020/2020-10-31-python-metaclass.html">
            
                <a href="../2020/2020-10-31-python-metaclass.html">
            
                    
                    Python Metaclass
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.2" data-path="../2020/2020-10-07-tools-for-reliability.html">
            
                <a href="../2020/2020-10-07-tools-for-reliability.html">
            
                    
                    Tools for Reliability
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.3" data-path="../2020-09-10-MVCC/2020/2020-09-10-MVCC.md">
            
                <span>
            
                    
                    MVCC
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.4" data-path="../2020/2020-07-21-shards-replicas-and-nodes.html">
            
                <a href="../2020/2020-07-21-shards-replicas-and-nodes.html">
            
                    
                    Shards, Replicas and Nodes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.5" data-path="../2020/2020-02-24-call-a-class-method-from-an-instance-in-python/2020-02-24-call-a-class-method-from-an-instance-in-python.html">
            
                <a href="../2020/2020-02-24-call-a-class-method-from-an-instance-in-python/2020-02-24-call-a-class-method-from-an-instance-in-python.html">
            
                    
                    Call a Class Method from an Instance in Python
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.6" data-path="../2020/2020-02-18-mvvm-vs-redux/2020-02-18-mvvm-vs-redux.html">
            
                <a href="../2020/2020-02-18-mvvm-vs-redux/2020-02-18-mvvm-vs-redux.html">
            
                    
                    MVVM vs Redux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.7" data-path="../2020/2020-02-12-netflix-vs-k8s+istio/2020-02-12-netflix-vs-k8s+istio.html">
            
                <a href="../2020/2020-02-12-netflix-vs-k8s+istio/2020-02-12-netflix-vs-k8s+istio.html">
            
                    
                    Two Microservice Tech Stacks: Netflix vs K8S + Istio
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.8" data-path="../2020/2020-02-10-k8s-ss-kcp.html">
            
                <a href="../2020/2020-02-10-k8s-ss-kcp.html">
            
                    
                    A Kubernetes solution for ShadowSocks + kcptun
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.9" data-path="../2020/2020-01-31-wuhan-coronavirus-timeline-api/2020-01-31-wuhan-coronavirus-timeline-api.html">
            
                <a href="../2020/2020-01-31-wuhan-coronavirus-timeline-api/2020-01-31-wuhan-coronavirus-timeline-api.html">
            
                    
                    A Test App with Istio
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.3" >
            
                <span>
            
                    
                    2019
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.3.1" data-path="../2019/2019-11-30-Java-from-code-to-run/2019-11-30-Java-from-code-to-run.html">
            
                <a href="../2019/2019-11-30-Java-from-code-to-run/2019-11-30-Java-from-code-to-run.html">
            
                    
                    Java - from code to run
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.2" data-path="../2019/2019-10-27-android-booting-process/2019-10-27-android-booting-process.html">
            
                <a href="../2019/2019-10-27-android-booting-process/2019-10-27-android-booting-process.html">
            
                    
                    Android Linux Booting Process
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.3" data-path="../2019/2019-10-24-resolve-single-number-problems/2019-10-24-resolve-single-number-problems.html">
            
                <a href="../2019/2019-10-24-resolve-single-number-problems/2019-10-24-resolve-single-number-problems.html">
            
                    
                    Resolve Single Number Problems
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.4" data-path="../2019/2019-10-24-resolve-recursion-problems/2019-10-24-resolve-recursion-problems.html">
            
                <a href="../2019/2019-10-24-resolve-recursion-problems/2019-10-24-resolve-recursion-problems.html">
            
                    
                    Resolve Recursion Problems
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.5" data-path="../2019/2019-10-18-the-things-to-consider-as-an-architect/2019-10-18-the-things-to-consider-as-an-architect.html">
            
                <a href="../2019/2019-10-18-the-things-to-consider-as-an-architect/2019-10-18-the-things-to-consider-as-an-architect.html">
            
                    
                    The Things to Consider as An Architect
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.6" data-path="../2019/2019-10-14-a-simple-explanation-of-information-gain/2019-10-14-a-simple-explanation-of-information-gain.html">
            
                <a href="../2019/2019-10-14-a-simple-explanation-of-information-gain/2019-10-14-a-simple-explanation-of-information-gain.html">
            
                    
                    A Simple Explanation of Information Gain
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.7" data-path="../2019/2019-10-10-developing-a-machine-learning-application/2019-10-10-developing-a-machine-learning-application.html">
            
                <a href="../2019/2019-10-10-developing-a-machine-learning-application/2019-10-10-developing-a-machine-learning-application.html">
            
                    
                    Developing a Machine Learning Application
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.8" data-path="../2019/2019-10-08-machine-learning-tasks/2019-10-08-machine-learning-tasks.html">
            
                <a href="../2019/2019-10-08-machine-learning-tasks/2019-10-08-machine-learning-tasks.html">
            
                    
                    Machine Learning Tasks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.9" data-path="../2019/2019-10-01-The-difference-between-127.0.0.1-and-0.0.0.0.html">
            
                <a href="../2019/2019-10-01-The-difference-between-127.0.0.1-and-0.0.0.0.html">
            
                    
                    The difference between 127.0.0.1 and 0.0.0.0
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.10" data-path="../2019/2019-04-15-relationship-between-ai-machine-learning-and-deep-learning/2019-04-15-relationship-between-ai-machine-learning-and-deep-learning.html">
            
                <a href="../2019/2019-04-15-relationship-between-ai-machine-learning-and-deep-learning/2019-04-15-relationship-between-ai-machine-learning-and-deep-learning.html">
            
                    
                    Relationship between AI, Machine Learning and Deep Learning
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.11" data-path="../2019/2019-04-09-new-script.html">
            
                <a href="../2019/2019-04-09-new-script.html">
            
                    
                    Shell Script Generator
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.12" data-path="../2019/2019-04-09-mac-vpn-script.html">
            
                <a href="../2019/2019-04-09-mac-vpn-script.html">
            
                    
                    Mac VPN script
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.4" >
            
                <span>
            
                    
                    2018
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.4.1" data-path="../2018/2018-05-07-deploy-ShadowSocks-Manager-in-one-minute.html">
            
                <a href="../2018/2018-05-07-deploy-ShadowSocks-Manager-in-one-minute.html">
            
                    
                    ç¸ä¿¡ç§å­¦ - ä¸åéé¨ç½² ShadowSocks-Manager
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.2" data-path="../2018/2018-04-15-GIL-in-ruby.html">
            
                <a href="../2018/2018-04-15-GIL-in-ruby.html">
            
                    
                    Digest: GIL in Ruby
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.3" data-path="../2018/2018-04-15-An-introduction-to-functional-programming-abstract.html">
            
                <a href="../2018/2018-04-15-An-introduction-to-functional-programming-abstract.html">
            
                    
                    Digest: An introduction to functional programming
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.5" >
            
                <span>
            
                    
                    2017
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.2.5.1" data-path="2017-11-27-Start-ShadowSocks-in-One-Minute.html">
            
                <a href="2017-11-27-Start-ShadowSocks-in-One-Minute.html">
            
                    
                    Start ShadowSocks in One Minute
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.2" data-path="2017-09-14-Javascript-vs-Ruby-Inheritance/2017-09-14-Javascript-vs-Ruby-Inheritance.html">
            
                <a href="2017-09-14-Javascript-vs-Ruby-Inheritance/2017-09-14-Javascript-vs-Ruby-Inheritance.html">
            
                    
                    JavaScript vs Ruby in Inheritance
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.3" data-path="2017-07-02-Docker-inside-GFW/2017-07-02-Docker-inside-GFW.html">
            
                <a href="2017-07-02-Docker-inside-GFW/2017-07-02-Docker-inside-GFW.html">
            
                    
                    Docker inside GFW
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.4" data-path="2017-07-01-Test-with-iOS.html">
            
                <a href="2017-07-01-Test-with-iOS.html">
            
                    
                    Test with iOS
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../../series/">
            
                <a href="../../../series/">
            
                    
                    Series
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" >
            
                <span>
            
                    
                    CFA Preparation
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="../../../series/CFA/LEVEL_1.html">
            
                <a href="../../../series/CFA/LEVEL_1.html">
            
                    
                    CFA LEVEL 1
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1.1" data-path="../../../series/CFA/EQUITY/">
            
                <a href="../../../series/CFA/EQUITY/">
            
                    
                    EQUITY
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1.1.1" data-path="../../../series/CFA/EQUITY/READING36.html">
            
                <a href="../../../series/CFA/EQUITY/READING36.html">
            
                    
                    Reading 36
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.1.2" data-path="../../../series/CFA/EQUITY/READING37.html">
            
                <a href="../../../series/CFA/EQUITY/READING37.html">
            
                    
                    Reading 37
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.1.3" data-path="../../../series/CFA/EQUITY/READING38.html">
            
                <a href="../../../series/CFA/EQUITY/READING38.html">
            
                    
                    Reading 38
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.1.4" data-path="../../../series/CFA/EQUITY/READING39.html">
            
                <a href="../../../series/CFA/EQUITY/READING39.html">
            
                    
                    Reading 39
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.1.5" data-path="../../../series/CFA/EQUITY/READING40.html">
            
                <a href="../../../series/CFA/EQUITY/READING40.html">
            
                    
                    Reading 40
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.1.6" data-path="../../../series/CFA/EQUITY/READING41.html">
            
                <a href="../../../series/CFA/EQUITY/READING41.html">
            
                    
                    Reading 41
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../../../series/quantitative-trading-with-backtrader/">
            
                <a href="../../../series/quantitative-trading-with-backtrader/">
            
                    
                    Quantitative Trading with Backtrader
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1" data-path="../../../series/quantitative-trading-with-backtrader/2020-09-09-backtrader-architecture/2020-09-09-backtrader-architecture.html">
            
                <a href="../../../series/quantitative-trading-with-backtrader/2020-09-09-backtrader-architecture/2020-09-09-backtrader-architecture.html">
            
                    
                    Backtrader Architecut
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.2" data-path="../../../series/quantitative-trading-with-backtrader/2020-09-27-qt-htbyoatb-1/2020-09-27-qt-htbyoatb-1.html">
            
                <a href="../../../series/quantitative-trading-with-backtrader/2020-09-27-qt-htbyoatb-1/2020-09-27-qt-htbyoatb-1.html">
            
                    
                    Chapter 1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.3" data-path="../../../series/quantitative-trading-with-backtrader/2020-09-28-qt-htbyoatb-2/2020-09-28-qt-htbyoatb-2.html">
            
                <a href="../../../series/quantitative-trading-with-backtrader/2020-09-28-qt-htbyoatb-2/2020-09-28-qt-htbyoatb-2.html">
            
                    
                    Chapter 2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.4" data-path="../../../series/quantitative-trading-with-backtrader/2020-09-29-qt-htbyoatb-3.1/2020-09-29-qt-htbyoatb-3.1.html">
            
                <a href="../../../series/quantitative-trading-with-backtrader/2020-09-29-qt-htbyoatb-3.1/2020-09-29-qt-htbyoatb-3.1.html">
            
                    
                    Chapter 3 (ä¸)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.5" data-path="../../../series/quantitative-trading-with-backtrader/2020-09-29-qt-htbyoatb-3.2/2020-09-29-qt-htbyoatb-3.2.html">
            
                <a href="../../../series/quantitative-trading-with-backtrader/2020-09-29-qt-htbyoatb-3.2/2020-09-29-qt-htbyoatb-3.2.html">
            
                    
                    Chapter 3 (ä¸)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.6" data-path="../../../series/quantitative-trading-with-backtrader/2020-10-01-qt-htbyoatb-4/2020-10-01-qt-htbyoatb-4.html">
            
                <a href="../../../series/quantitative-trading-with-backtrader/2020-10-01-qt-htbyoatb-4/2020-10-01-qt-htbyoatb-4.html">
            
                    
                    Chapter 4
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.7" data-path="../../../series/quantitative-trading-with-backtrader/2020-10-01-qt-htbyoatb-5/2020-10-01-qt-htbyoatb-5.html">
            
                <a href="../../../series/quantitative-trading-with-backtrader/2020-10-01-qt-htbyoatb-5/2020-10-01-qt-htbyoatb-5.html">
            
                    
                    Chapter 5
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.8" data-path="../../../series/quantitative-trading-with-backtrader/2020-10-20-qt-htbyoatb-6.1/2020-10-20-qt-htbyoatb-6.1.html">
            
                <a href="../../../series/quantitative-trading-with-backtrader/2020-10-20-qt-htbyoatb-6.1/2020-10-20-qt-htbyoatb-6.1.html">
            
                    
                    Chapter 6 (ä¸)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.9" data-path="../../../series/quantitative-trading-with-backtrader/2020-10-20-qt-htbyoatb-6.2/2020-10-20-qt-htbyoatb-6.2.html">
            
                <a href="../../../series/quantitative-trading-with-backtrader/2020-10-20-qt-htbyoatb-6.2/2020-10-20-qt-htbyoatb-6.2.html">
            
                    
                    Chapter 6 (ä¸)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../.." >Start ShadowSocks in One Minute</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="start-shadowsocks-in-one-minute">Start ShadowSocks in One Minute</h1>
<blockquote>
<ul>
<li>Author: <a href="https://www.damonyuan.com" target="_blank">Damon Yuan</a></li>
<li>Date: 2017-11-27</li>
</ul>
</blockquote>
<p>For the reason you know what, it is always difficult to access github or run some command to fetch remote resource from inside China network. One of the solution is to punch a hole in the Great Wall by setting up ShadowSocks proxy to route your traffic through secured tunnel. There are many great articles to introduce the theory of ShadowSocks and the installation of it, but there is none that automate the process of it. Here is a a automation shell script to help start ShadowSocks server and client in a minute, and it is tested on Ubuntu 16.04. Feel free to modify it according to your requirement.</p>
<ul>
<li>Theory of ShadowSocks: <a href="https://github.com/gwuhaolin/blog/issues/12" title="&#x4F60;&#x4E5F;&#x80FD;&#x5199;&#x4E2A; Shadowsocks" target="_blank">&#x4F60;&#x4E5F;&#x80FD;&#x5199;&#x4E2A; ShadowSocks</a>; <a href="https://loggerhead.me/posts/shadowsocks-yuan-ma-fen-xi-xie-yi-yu-jie-gou.html#fn:router-problem" target="_blank">ShadowSocks &#x6E90;&#x4EE3;&#x7801;&#x5206;&#x6790;</a></li>
<li>Set proxy for docker: <a href="http://blog.csdn.net/styshoo/article/details/55657714" title="Docker&#x7F51;&#x7EDC;&#x4EE3;&#x7406;&#x8BBE;&#x7F6E;" target="_blank">Docker&#x7F51;&#x7EDC;&#x4EE3;&#x7406;&#x8BBE;&#x7F6E;</a></li>
<li>Thanks to this article <a href="http://droidyue.com/blog/2016/04/04/set-shadowsocks-proxy-for-terminal/" title="&#x4E3A;&#x7EC8;&#x7AEF;&#x8BBE;&#x7F6E;Shadowsocks&#x4EE3;&#x7406;" target="_blank">&#x4E3A;&#x7EC8;&#x7AEF;&#x8BBE;&#x7F6E;Shadowsocks&#x4EE3;&#x7406;</a>, and the implementation of this script is based on it.</li>
</ul>
<h3 id="script">Script:</h3>
<pre><code>#!/bin/bash
# ---------------------------------------------------------------------------
# ss_proxy - create shadowsocks server and client

# Copyright 2017,  &lt;damon@Damons-Macbook.local&gt;

# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.

# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License at &lt;http://www.gnu.org/licenses/&gt; for
# more details.

# Usage: ss_proxy [-h|--help] [-sss|--shadowsocks_server] [-ssc|--shadowsocks_client]

# Revision history:
# 2017-11-27 Created by new_script ver. 3.3
# ---------------------------------------------------------------------------

PROGNAME=${0##*/}
VERSION=&quot;0.1&quot;

clean_up() { # Perform pre-exit housekeeping
  return
}

error_exit() {
  echo -e &quot;${PROGNAME}: ${1:-&quot;Unknown Error&quot;}&quot; &gt;&amp;2
  clean_up
  exit 1
}

graceful_exit() {
  clean_up
  exit
}

signal_exit() { # Handle trapped signals
  case $1 in
    INT)
      error_exit &quot;Program interrupted by user&quot; ;;
    TERM)
      echo -e &quot;\n$PROGNAME: Program terminated&quot; &gt;&amp;2
      graceful_exit ;;
    *)
      error_exit &quot;$PROGNAME: Terminating on unknown signal&quot; ;;
  esac
}

usage() {
  echo -e &quot;Usage: $PROGNAME [-h|--help] [-sss|--shadowsocks_server] [-ssc|--shadowsocks_client]&quot;
}

help_message() {
  cat &lt;&lt;- _EOF_
  $PROGNAME ver. $VERSION
  create shadowsocks server and client

  $(usage)

  Options:
  -h, --help  Display this help message and exit.
  -sss, --shadowsocks_server  shadowsocks server
  -ssc, --shadowsocks_client  shadowsocks client

  NOTE: You must be the superuser to run this script.

_EOF_
  return
}

# Trap signals
trap &quot;signal_exit TERM&quot; TERM HUP
trap &quot;signal_exit INT&quot;  INT

# Check for root UID
if [[ $(id -u) != 0 ]]; then
  error_exit &quot;You must be the superuser to run this script.&quot;
fi

install_shadowsocks() {
  apt-get update
  apt-get install -y python-pip python-dev build-essential
  pip install --upgrade pip
  pip install --upgrade virtualenv
  pip install shadowsocks
}

shadowsocks_server() {
  echo  -n &quot;What is your shadowsocks server password? &quot;
  read shadowsocks_password
  read -r -d &apos;&apos; json &lt;&lt;- _EOF_
    {
      &quot;server&quot;:&quot;0.0.0.0&quot;,
      &quot;server_port&quot;:8388,
      &quot;local_address&quot;:&quot;127.0.0.1&quot;,
      &quot;local_port&quot;:1080,
      &quot;password&quot;:&quot;${shadowsocks_password}&quot;,
      &quot;timeout&quot;:300,
      &quot;method&quot;:&quot;rc4-md5&quot;,
      &quot;fast_open&quot;: false,
      &quot;workers&quot;: 2
    }
_EOF_
  echo $json &gt; /etc/shadowsocks_server.json

  install_shadowsocks
  ssserver -c /etc/shadowsocks_server.json -d start
}

shadowsocks_client() {
  echo  -n &quot;What is your shadowsocks server password? &quot;
  read shadowsocks_password
  echo  -n &quot;What is your shadowsocks server public ip address? &quot;
  read public_ip
  read -r -d &apos;&apos; json &lt;&lt;- _EOF_
    {
      &quot;server&quot;:&quot;${public_ip}&quot;,
      &quot;server_port&quot;:8388,
      &quot;local_address&quot;:&quot;127.0.0.1&quot;,
      &quot;local_port&quot;:1080,
      &quot;password&quot;:&quot;${shadowsocks_password}&quot;,
      &quot;timeout&quot;:300,
      &quot;method&quot;:&quot;rc4-md5&quot;
    }
_EOF_
  echo $json &gt; /etc/shadowsocks_client.json

  install_shadowsocks
  sslocal -c /etc/shadowsocks_client.json -d start

  apt-get install polipo
  read -r -d &apos;&apos; polipo &lt;&lt;- _EOF_
  logSyslog = true \n
  logFile = /var/log/polipo/polipo.log \n
  logLevel=4 \n
  socksParentProxy = &quot;localhost:1080&quot; \n
  socksProxyType = socks5 \n
_EOF_
  echo -e $polipo &gt; /etc/polipo/config
  service polipo start

  echo -e &quot;\nalias hp=\&quot;http_proxy=http://localhost:8123 https_proxy=http://localhost:8123\&quot;&quot; &gt;&gt; ~/.bashrc
  echo -e &quot;\ngp=\&quot; --config http.proxy=localhost:8123\&quot;&quot;
  source ~/.bashrc

  echo &quot;Logout and ssh login again then you can start proxy by \`hp curl ip.gs\` or \`git clone  https://android.googlesource.com/tools/repo $gp\`&quot;
}

# Parse command-line
while [[ -n $1 ]]; do
  case $1 in
    -h | --help)
      help_message; graceful_exit ;;
    -sss | --shadowsocks_server)
      echo &quot;shadowsocks server&quot;; shadowsocks_server ;;
    -ssc | --shadowsocks_client)
      echo &quot;shadowsocks client&quot;; shadowsocks_client ;;
    -* | --*)
      usage
      error_exit &quot;Unknown option $1&quot; ;;
    *)
      echo &quot;Argument $1 to process...&quot; ;;
  esac
  shift
done

# Main logic

graceful_exit
</code></pre>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                
                <a href="2017-09-14-Javascript-vs-Ruby-Inheritance/2017-09-14-Javascript-vs-Ruby-Inheritance.html" class="navigation navigation-next navigation-unique" aria-label="Next page: JavaScript vs Ruby in Inheritance">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Start ShadowSocks in One Minute","description":"For the reason you know what, it is always difficult to access github or run some command to fetch remote resource from inside China network. One of the solution is to punch a hole in the Great Wall by setting up ShadowSocks proxy to route your traffic through secured tunnel. There are many great articles to introduce the theory of ShadowSocks and the installation of it, but there is none that automate the process of it. Here is a a automation shell script to help start ShadowSocks server and client in a minute, and it is tested on Ubuntu 16.04. Feel free to modify it according to your requirement.","date":"2017-11-27T12:08:00.000Z","categories":["Tech"],"tags":["DevOps"],"level":"1.2.5.1","depth":3,"next":{"title":"JavaScript vs Ruby in Inheritance","level":"1.2.5.2","depth":3,"path":"blogs/tech/2017/2017-09-14-Javascript-vs-Ruby-Inheritance/2017-09-14-Javascript-vs-Ruby-Inheritance.md","ref":"blogs/tech/2017/2017-09-14-Javascript-vs-Ruby-Inheritance/2017-09-14-Javascript-vs-Ruby-Inheritance.md","articles":[]},"previous":{"title":"2017","level":"1.2.5","depth":2,"ref":"","articles":[{"title":"Start ShadowSocks in One Minute","level":"1.2.5.1","depth":3,"path":"blogs/tech/2017/2017-11-27-Start-ShadowSocks-in-One-Minute.md","ref":"blogs/tech/2017/2017-11-27-Start-ShadowSocks-in-One-Minute.md","articles":[]},{"title":"JavaScript vs Ruby in Inheritance","level":"1.2.5.2","depth":3,"path":"blogs/tech/2017/2017-09-14-Javascript-vs-Ruby-Inheritance/2017-09-14-Javascript-vs-Ruby-Inheritance.md","ref":"blogs/tech/2017/2017-09-14-Javascript-vs-Ruby-Inheritance/2017-09-14-Javascript-vs-Ruby-Inheritance.md","articles":[]},{"title":"Docker inside GFW","level":"1.2.5.3","depth":3,"path":"blogs/tech/2017/2017-07-02-Docker-inside-GFW/2017-07-02-Docker-inside-GFW.md","ref":"blogs/tech/2017/2017-07-02-Docker-inside-GFW/2017-07-02-Docker-inside-GFW.md","articles":[]},{"title":"Test with iOS","level":"1.2.5.4","depth":3,"path":"blogs/tech/2017/2017-07-01-Test-with-iOS.md","ref":"blogs/tech/2017/2017-07-01-Test-with-iOS.md","articles":[]}]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["intopic-toc","collapsible-chapters","katex","ga"],"pluginsConfig":{"intopic-toc":{"isCollapsed":true,"isScrollspyActive":true,"label":"In this article","maxDepth":6,"mode":"nested","selector":".markdown-section h1, .markdown-section h2, .markdown-section h3, .markdown-section h4, .markdown-section h5, .markdown-section h6","visible":true},"search":{},"collapsible-chapters":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"katex":{},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"ga":{"configuration":"auto","token":"UA-92600235-2"},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"blogs/tech/2017/2017-11-27-Start-ShadowSocks-in-One-Minute.md","mtime":"2021-07-13T03:16:59.981Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-07-19T16:33:44.973Z"},"basePath":"../../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../../gitbook/gitbook.js"></script>
    <script src="../../../gitbook/theme.js"></script>
    
        
        <script src="../../../gitbook/gitbook-plugin-intopic-toc/anchor.min.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-intopic-toc/gumshoe.polyfills.min.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-intopic-toc/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-collapsible-chapters/collapsible-chapters.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-ga/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

